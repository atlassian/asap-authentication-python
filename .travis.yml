sudo: false
language: python
python:
- 2.7
- 3.4
- 3.5
- &main_python_version 3.6
install:
- if [[ $TRAVIS_PYTHON_VERSION == 3.5 || $TRAVIS_PYTHON_VERSION == 3.6 ]]; then pip install aiohttp==2.0.6 asynctest==0.10.0; fi
script:
- python setup.py test

jobs:
  fast_finish: true

  include:
  - stage: &lint_stage_name lint
    python: *main_python_version
    install:
    - pip install -q pep8==1.6.2
    script:
    - pep8 .

stages:
- *lint_stage_name
- test
- deploy
